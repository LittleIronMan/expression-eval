function e(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=e(require("jsep")),t=function e(r,t){try{var u,c=r;switch(c.type){case"ArrayExpression":return Promise.resolve(o(c.elements,t));case"BinaryExpression":return Promise.resolve(Promise.all([e(c.left,t),e(c.right,t)])).then(function(e){return i[c.operator](e[0],e[1])});case"CallExpression":var a,l,f,p=function(){if("function"==typeof l){var e=l,r=e.apply,n=a;return Promise.resolve(o(c.arguments,t)).then(function(t){return Promise.resolve(r.call(e,n,t))})}},m="MemberExpression"===c.callee.type?Promise.resolve(n(c.callee,t)).then(function(e){a=(f=e)[0],l=f[1]}):Promise.resolve(e(c.callee,t)).then(function(e){l=e});return Promise.resolve(m&&m.then?m.then(p):p());case"ConditionalExpression":return Promise.resolve(e(c.test,t)).then(function(r){return Promise.resolve(e(r?c.consequent:c.alternate,t))});case"Identifier":return Promise.resolve(t[c.name]);case"Literal":return Promise.resolve(c.value);case"LogicalExpression":var v=function(r){return u?r:Promise.resolve(Promise.all([e(c.left,t),e(c.right,t)])).then(function(e){return i[c.operator](e[0],e[1])})},h="||"===c.operator?(u=1,Promise.resolve(e(c.left,t)).then(function(r){return r||Promise.resolve(e(c.right,t))})):function(){if("&&"===c.operator)return u=1,Promise.resolve(e(c.left,t)).then(function(r){return r?Promise.resolve(e(c.right,t)):r})}();return Promise.resolve(h&&h.then?h.then(v):v(h));case"MemberExpression":return Promise.resolve(n(c,t)).then(function(e){return e[1]});case"ThisExpression":return Promise.resolve(t);case"UnaryExpression":var d=s[c.operator];return Promise.resolve(e(c.argument,t)).then(function(e){return d.call(s,e)});default:return Promise.resolve(void 0)}}catch(e){return Promise.reject(e)}},n=function(e,r){try{return Promise.resolve(t(e.object,r)).then(function(n){function o(){if(/^__proto__|prototype|constructor$/.test(u))throw Error("prototype access detected");return[n,n[u]]}var u,i=function(){if(e.computed)return Promise.resolve(t(e.property,r)).then(function(e){u=e});u=e.property.name}();return i&&i.then?i.then(o):o()})}catch(e){return Promise.reject(e)}},o=function(e,r){try{return Promise.resolve(Promise.all(e.map(function(e){return t(e,r)})))}catch(e){return Promise.reject(e)}},u={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},i={"||":function(e,r){return e||r},"&&":function(e,r){return e&&r},"|":function(e,r){return e|r},"^":function(e,r){return e^r},"&":function(e,r){return e&r},"==":function(e,r){return e==r},"!=":function(e,r){return e!=r},"===":function(e,r){return e===r},"!==":function(e,r){return e!==r},"<":function(e,r){return e<r},">":function(e,r){return e>r},"<=":function(e,r){return e<=r},">=":function(e,r){return e>=r},"<<":function(e,r){return e<<r},">>":function(e,r){return e>>r},">>>":function(e,r){return e>>>r},"+":function(e,r){return e+r},"-":function(e,r){return e-r},"*":function(e,r){return e*r},"/":function(e,r){return e/r},"%":function(e,r){return e%r}},s={"-":function(e){return-e},"+":function(e){return+e},"~":function(e){return~e},"!":function(e){return!e}};function c(e,r){return e.map(function(e){return l(e,r)})}function a(e,r){var t,n=l(e.object,r);if(t=e.computed?l(e.property,r):e.property.name,/^__proto__|prototype|constructor$/.test(t))throw Error("prototype access detected");return[n,n[t]]}function l(e,r){var t=e;switch(t.type){case"ArrayExpression":return c(t.elements,r);case"BinaryExpression":return i[t.operator](l(t.left,r),l(t.right,r));case"CallExpression":var n,o,u;if("MemberExpression"===t.callee.type?(n=(u=a(t.callee,r))[0],o=u[1]):o=l(t.callee,r),"function"!=typeof o)return;return o.apply(n,c(t.arguments,r));case"ConditionalExpression":return l(t.test,r)?l(t.consequent,r):l(t.alternate,r);case"Identifier":return r[t.name];case"Literal":return t.value;case"LogicalExpression":return"||"===t.operator?l(t.left,r)||l(t.right,r):"&&"===t.operator?l(t.left,r)&&l(t.right,r):i[t.operator](l(t.left,r),l(t.right,r));case"MemberExpression":return a(t,r)[1];case"ThisExpression":return r;case"UnaryExpression":return s[t.operator](l(t.argument,r));default:return}}Object.defineProperty(exports,"parse",{enumerable:!0,get:function(){return r.default}}),exports.addBinaryOp=function(e,t,n){n?(r.default.addBinaryOp(e,t),i[e]=n):(r.default.addBinaryOp(e,u[e]||1),i[e]=t)},exports.addUnaryOp=function(e,t){r.default.addUnaryOp(e),s[e]=t},exports.compile=function(e){return l.bind(null,r.default(e))},exports.compileAsync=function(e){return t.bind(null,r.default(e))},exports.eval=l,exports.evalAsync=t;
//# sourceMappingURL=expression-eval.js.map
